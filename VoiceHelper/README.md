# Voice helper friend
## en
### About the program
An assistant friend with whom you can communicate by voice.
By Python.

## ru
### О программе
Программа для ситуаций, когда нет возможности или желания управлять компьютером при помощи мышки или клавиатуры.

Под управлением подразумеваются  самые обычные действия обычного пользователя. 
Основное назначение программы - прослушивание или просмотр медиа. 

Также планируется добавить:
1. составление текстовых файлов (список дел, напоминания, какая-то информация, которую надо зафиксировать)
2. запуск таймера 
3. получение информации о времени
4. получение информации о погоде.

Чтобы определить, что обращаются к программе, в программе есть специальное слово маячок. Объявляется оно в модуле `voicehelper_friend_config.py` и по умолчанию это слово "друг" :
``` python
FRIEND = 'друг'
```


Управление осуществляется по двум сценариям.

**Первый сценарий**: программа постоянно прослушивает входящие слова порциями по 2 секунды.  Если программа обнаруживает в словах обращение к ней (слово-маячок), то она отбирает все слова которые вошли в интервал 2 секунд вместе со словом маячком и пытается найти соответствие этих слов командам, которые она умеет выполнять. Если такое соответствие найдено, то программа выполняет команду из соответствия. Если же такое соответствие не найдено, то программа переходит ко второму сценарию.
То есть основная цель первого сценария уловить обращение к «другу» (слово-маячок) и по возможности выполнить команду. Поэтому отклик по первому сценарию быстрый.

Во **втором сценарии** прослушивание идет до тех пор пока пауза между словами не станет больше 2-4 секунд или длина сообщения не станет больше 100 символов. Далее также ищется соответствие слов из выражения командам, которые программа умеет выполнять.
То есть во втором сценарии программа уже поняла, что к ней обратились и что возможно команда будет достаточно длинная и что пользователь может говорить эту команду не очень быстро. Поэтому реакция по второму сценарию не очень быстрая.

В первом релизе доступен запуск плеера,  и перемещение по трекам плейлиста вперед и назад. 
На данном этапе используется единственный плейлист с именем `my_playlist.m3u`, который пока составляется заранее "руками" ( с помощью клавиатуры и мышки). Плейлист можно составить в программе "VLC media player". Выглядит плейлист примерно так:
```
#EXTM3U
#EXTINF:2,Kipling_If.mp3
file:///F:/MyMusic/Kipling_If.mp3
#EXTINF:5,Romeo_and_Juliet.mp3
file:///F:/MyMusic/Romeo_and_Juliet.mp3
#EXTINF:5,Waltz.mp3
file:///F:/MyMusic/Waltz.mp3
#EXTINF:10,Bella_ciao.mp3
file:///F:/MyMusic/Bella_ciao.mp3
```

В ближайшее время планируется добавить перемещение на несколько треков вперед-назад, перемещение к конкретному треку, перемещение внутри треков на заданный интервал.

Так как одну и ту же команду пользователь может выразить разными словами и так как модуль распознавания не всегда точно распознает окончания слов, в программе для некоторых команд задаются различные варианты вызова.
Так например для запуска плеера могут использоваться такие слова: *играй, играть, пой, петь*. Это прописано в модуле `voicehelper_friend_config.py`:
``` 
SET_PLAY = {'играй', 'играть', 'пой', 'петь'}
```

На данном этапе программа работает под Windows. Тестировалась на Windows 10. 
В коде программы вставлены выводы (print) для отладки. Часть из них закомментирована, но при желании, их можно раскомментировать.

### Стек технологий
Программа разработана на Python 3.11  
Перечень всех модулей и пакетов, необходимых для корректной работы программы содержаться в файле `requirements.txt`. 

### Инструкция по установке
Должен быть установлен Python 3.11. Возможно прграмма будет работать и на других версиях Python 3. 

Скачать и поместить в отдельную папку файлы `voicehelper_friend.py` и `voicehelper_friend_config.py`. 

Скачать малые (Lightweight) библиотеки vosk `vosk-model-small-en-us-0.*` для управления на английском языке и `vosk-model-small-ru-0.*` для управления на русском языке. Программа тестировалась с библиотеками `vosk-model-small-en-us-0.15` и `vosk-model-small-ru-0.22`. Но с другими версиями малых библиотек программа также должна работать. Библиотеки можно взять с этого репозитория или с сайта разработчика https://alphacephei.com/vosk/models. Библиотеки также надо поместить в папку с программой.

Настроить виртуальное окружение. Зависимости взять из файла `requirements.txt`.


В "VLC media player" создать плейлист с именем `my_playlist.m3u`.  
В плейлисте должен быть прописан полный путь к медиафайлам, с указанием диска и папок.  
Пример: `file:///F:/MyMusic/Romeo_and_Juliet.mp3`.  


### Инструкция по использованию
Программа запускается файлом ```voicehelper_friend.py```. 
Настройки программы находятся в модуле `voicehelper_friend_config.py`.  

Перед запуском программы в модуле ```voicehelper_friend_config.py``` необходимо выбрать язык и ввести имя пользователя. **По умолчанию язык – русский, а имя пользователя Люся**.

В первом релизе команда умеет запускать ранее созданный плейлист с именем ```my_playlist.m3u``` и переходить к следующему или предыдущему треку.  
**Запустить плейлист** можно одним из слов:  *играй, играть, пой, петь*.  
**Перейти к следующему треку**: *следующий*.  
**Перейти к предыдущему треку**: *предыдущий*


